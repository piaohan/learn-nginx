(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{264:function(t,e,o){"use strict";o.r(e);var n=o(28),r=Object(n.a)({},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("h1",{attrs:{id:"配置-https"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#配置-https"}},[t._v("#")]),t._v(" 配置 HTTPS")]),t._v(" "),o("p",[t._v("首先配置支持 HTTPS 必须让 Nginx 开启 "),o("code",[t._v("http_ssl_module")]),t._v(" 模块，"),o("RouterLink",{attrs:{to:"/guide/nginx-configure-descriptions.html"}},[t._v("点击查看nginx编译安装参数")]),t._v(" ，可以使用"),o("code",[t._v("nginx -V")]),t._v("查看是否开启"),o("code",[t._v("TLS SNI support enabled")]),t._v("。")],1),t._v(" "),o("p",[t._v("购买/生成 SSL 证书，可以使用免费的证书，比如："),o("a",{attrs:{href:"https://imququ.com/post/letsencrypt-certificate.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Let's Encrypt，免费好用的 HTTPS 证书"),o("OutboundLink")],1),t._v(" 。")]),t._v(" "),o("div",{staticClass:"language-conf extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v("# 配置 HTTPS\n\n# 配置个http的站点，用来做重定向，当然如果你不需要把 HTTP->HTTPS 可以把这个配置删了\nserver {\n    listen       80;\n\n    # 配置域名\n    server_name www.xxoo.com xxoo.com;\n\n    # 添加 STS, 并让所有子域支持, 开启需慎重\n    add_header strict-transport-security 'max-age=31536000; includeSubDomains; preload';\n\n    # 配置让这些 HTTP 的访问全部 301 重定向到 HTTPS 的\n    rewrite ^(.*) https://www.xxoo.com$1 permanent;\n}\n\n# 配置 HTTPS\nserver {\n    # 配置域名\n    server_name www.xxoo.com xxoo.com;\n\n    # https默认端口\n    listen 443;\n\n    # 添加STS, 并让所有子域支持, 开启需慎重\n    add_header strict-transport-security 'max-age=31536000; includeSubDomains; preload';\n\n    # https配置\n    ssl on;\n    ssl_certificate /xxoo/www.xxoo.com.crt;\n    ssl_certificate_key /xxoo/www.xxoo.com.key;\n\n    # 其他按正常配置处理即可...\n}\n")])])]),o("blockquote",[o("p",[t._v("注意，这里证书的格式是 "),o("code",[t._v(".crt")]),t._v(" 的。")])]),t._v(" "),o("h3",{attrs:{id:"配置后的访问规则"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#配置后的访问规则"}},[t._v("#")]),t._v(" 配置后的访问规则")]),t._v(" "),o("table",[o("thead",[o("tr",[o("th",[t._v("输入链接")]),t._v(" "),o("th",[t._v("最终访问链接")])])]),t._v(" "),o("tbody",[o("tr",[o("td",[t._v("http://www.xxoo.com")]),t._v(" "),o("td",[t._v("https://www.xxoo.com")])]),t._v(" "),o("tr",[o("td",[t._v("http://www.xxoo.com/404/500")]),t._v(" "),o("td",[t._v("https://www.xxoo.com/404/500")])]),t._v(" "),o("tr",[o("td",[t._v("http://xxoo.com")]),t._v(" "),o("td",[t._v("https://www.xxoo.com")])]),t._v(" "),o("tr",[o("td",[t._v("https://www.xxoo.com")]),t._v(" "),o("td",[t._v("-（原链接不变）")])]),t._v(" "),o("tr",[o("td",[t._v("https://xxoo.com/500")]),t._v(" "),o("td",[t._v("https://www.xxoo.com/500")])])])]),t._v(" "),o("h3",{attrs:{id:"强烈推荐"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#强烈推荐"}},[t._v("#")]),t._v(" 强烈推荐")]),t._v(" "),o("p",[t._v("使用 "),o("a",{attrs:{href:"https://github.com/Neilpang/acme.sh",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/Neilpang/acme.sh"),o("OutboundLink")],1),t._v(" 支持泛域名证书申请了，好赞。")])])}),[],!1,null,null,null);e.default=r.exports}}]);