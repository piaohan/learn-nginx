(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{266:function(e,t,r){"use strict";r.r(t);var n=r(28),s=Object(n.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"配置图片防盗链"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#配置图片防盗链"}},[e._v("#")]),e._v(" 配置图片防盗链")]),e._v(" "),r("p",[e._v("防盗链是指当图片不是自己网站打开时返回 403 或者指定图片，是通过请求的来路判断是否是自己的站点来设置响应。")]),e._v(" "),r("h3",{attrs:{id:"语法"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[e._v("#")]),e._v(" 语法")]),e._v(" "),r("p",[r("code",[e._v("valid_referers none | blocked | server_names | string")])]),e._v(" "),r("ul",[r("li",[r("code",[e._v("none")]),e._v("：表示没有来路")]),e._v(" "),r("li",[r("code",[e._v("blocked")]),e._v("：表示有来路")]),e._v(" "),r("li",[r("code",[e._v("server_names")]),e._v("：来路里包含当前域名")]),e._v(" "),r("li",[r("code",[e._v("string")]),e._v("：（忽略端口）\n"),r("ul",[r("li",[e._v("如果是字符串：一个域名验证的规则，"),r("code",[e._v("*")]),e._v(" 表示通配符")]),e._v(" "),r("li",[e._v("如果是以 "),r("code",[e._v("~")]),e._v(" 开头：正则表达式，排除https://或http://开头的字符串")])])])]),e._v(" "),r("p",[e._v("以上参数可以叠加一起使用。")]),e._v(" "),r("h3",{attrs:{id:"例子"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#例子"}},[e._v("#")]),e._v(" 例子")]),e._v(" "),r("div",{staticClass:"language-conf extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("server {\n\n    # 配置所有图片\n    location ~* \\.(gif|jpg|png|bmp)$ {\n        # 验证可以是没有来路、或者有来路时来路匹配xuexb.com、或者匹配当前域名\n        valid_referers none blocked *.xuexb.com server_names;\n\n        # 如果验证不通过则返回403\n        if ($invalid_referer) {\n            return 403;\n        }\n    }\n}\n")])])])])}),[],!1,null,null,null);t.default=s.exports}}]);